(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.simpleResult = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* module.jsx - Simple Result Module file (React JSX)
 */

// uncomment this line if the base page does not contain React
// var React = require('react');
if (!React) {
  console.error("React is not supported in this page!");
}

var ReactTable = require('react-table');

var ResultTable = React.createClass({displayName: "ResultTable",
  getInitialState: function() {
    return {items: [], text: ''};
  },
  onChange: function(e) {
    //this.setState({text: e.target.value});
  },
  onResult: function(data) {
    // handle query dispatch here
    console.log('Woke up! Got ', data.length, ' elements');
  },
  render: function() {
    return (
      React.createElement("div", null, 
        React.createElement("form", {onSubmit: this.handleSubmit}, 
          React.createElement(ReactTable, null)
        )
      )
    );
  }
});

module.exports = function() {
  var r = React.createElement(ResultTable, null);
  this.render = function() {
    var e = document.createElement('div');
    React.render(r, e);
    return e;
  };
  this.onResult = function(data) {
    r.onResult(data);
  };
}


},{"react-table":3}],2:[function(require,module,exports){

},{}],3:[function(require,module,exports){
module.exports = require('./src/table');


},{"./src/table":8}],4:[function(require,module,exports){
module.exports = {
  moduleClass: 'react-table',
  thClass: 'th',
  headClass: 'thead',
  trClass: 'tr',
  tdClass: 'td'
};


},{}],5:[function(require,module,exports){
var React = require('react');
var TableHeader = React.createFactory(require('./table-header'));
var constants = require('./constants');

module.exports = React.createClass({displayName: "exports",
  className: constants.moduleClass + '__' + constants.headClass,
  getDefaultProps: function () {
    return {
      columns: [],
      columnDisplay: {}
    };
  },
  handleHeadingClick: function () {
    if (this.props.clickHandler) {
      this.props.clickHandler.apply(null, arguments);
    }
  },
  renderHeader: function () {
    return this.props.columns.map(function (column) {
      var mappedValue = this.props.columnDisplay[column];

      return TableHeader({
        clickHandler: this.props.handleHeadingClick,
        isActive: this.props.activeKey === column,
        sortKey: column,
        sortDirection: this.props.sortDirection,
        children: mappedValue ? mappedValue : column
      });
    }.bind(this));
  },
  render: function () {
    return React.createElement('thead', {
      className: this.className,
      children: this.renderHeader()
    });
  }
});


},{"./constants":4,"./table-header":6,"react":2}],6:[function(require,module,exports){
var React = require('react');
var constants = require('./constants');

module.exports = React.createClass({displayName: "exports",
  className: constants.moduleClass + '__' + constants.thClass,
  getDefaultProps: function () {
    return {
      isActive: false,
      sortDirection: 'ascending'
    };
  },
  handleClick: function () {
    if (this.props.clickHandler) {
      this.props.clickHandler({
        sortKey: this.props.sortKey
      });
    }
  },
  getClassName: function () {
    var activeClass = this.props.isActive ?
      this.className + '--' + this.props.sortDirection : '';
    return [this.className, activeClass].join(' ');
  },
  render: function () {
    return React.createElement('th', {
      onClick: this.handleClick,
      className: this.getClassName()
    }, this.props.children);
  }
});


},{"./constants":4,"react":2}],7:[function(require,module,exports){
var React = require('react');
var constants = require('./constants');

module.exports = React.createClass({displayName: "exports",
  className: constants.moduleClass + '__' + constants.trClass,
  getDefaultProps: function () {
    return {
      data: []
    };
  },
  renderRowData: function () {
    var tds = [];
    var trClass = constants.moduleClass + '__' + constants.tdClass;

    for (var td in this.props.data) {
      tds.push(React.createElement('td', {
          className: trClass
        }, this.props.data[td]));
    }

    return tds;
  },
  render: function () {
    var rowData = this.renderRowData();
    return React.createElement('tr', {
      className: this.className,
      children: rowData
    });
  }
});


},{"./constants":4,"react":2}],8:[function(require,module,exports){
var React = require('react');
var TableRow = React.createFactory(require('./table-row'));
var TableHead = React.createFactory(require('./table-head'));

module.exports = React.createClass({displayName: "exports",
  getDefaultProps: function () {
    return {
      data: []
    };
  },
  getInitialState: function () {
    return {
      sortDirection: 'ascending'
    };
  },
  handleHeadingClick: function (data) {
    var activeKey = this.state.activeSortKey;

    if (activeKey && activeKey === data.sortKey) {
      this.setState({
        sortDirection: this.state.sortDirection ===
          'ascending' ? 'descending' : 'ascending'
      });
    } else {
      this.setState({
        activeSortKey: data.sortKey
      }, function () {
      }.bind(this));
    }
  },
  filterObject: function (obj) {
    var filteredData;
    var includedColumns = this.props.includedColumns;

    if (includedColumns) {
      filteredData = {};

      includedColumns.forEach(function (k) {
        filteredData[k] = obj[k];
      });
    } else {
      filteredData = obj;
    }

    return filteredData;
  },
  generateHeadersFromRow: function (row) {
    var data;
    var keys = [];

    if (row) {
      data = this.filterObject(row);
      keys = Object.keys(data);
    }

    return keys;
  },
  renderHead: function () {
    var columns = this.generateHeadersFromRow(this.props.data[0]);
    return TableHead({
      columns: columns,
      columnDisplay: this.props.columnDisplay,
      activeKey: this.state.activeSortKey,
      handleHeadingClick: this.handleHeadingClick,
      sortDirection: this.state.sortDirection
    });
  },
  sortRow: function (options, rowA, rowB) {
    var a = rowA[options.key];
    var b = rowB[options.key];

    if (options.direction === 'ascending') {
      if (options.type === 'number') {
        return a - b;
      } else {
        if (a < b) return -1;
        if (a > b) return 1;
        return 0;
      }
    } else {
      if (options.type === 'number') {
        return b - a;
      } else {
        if (a > b) return -1;
        if (a < b) return 1;
        return 0;
      }
    }
  },
  sortRows: function (data) {
    var sortConfig = {};

    sortConfig.direction = this.state.sortDirection;

    if (this.state.activeSortKey) {
      sortConfig.key = this.state.activeSortKey;
    } else {
      sortConfig.key = data[0] ?
        Object.keys(data[0])[0]
        : undefined;
    }

    sortConfig.type = sortConfig.key ? typeof data[0][sortConfig.key] : undefined;

    return data
          .sort(this.sortRow.bind(this, sortConfig));

  },
  renderRow: function (row) {
    return TableRow({
      data: this.filterObject(row)
    });
  },
  renderRows: function () {
    // keep things immutable-ish
    var data = this.props.data.slice();

    return this.sortRows(data)
      .map(this.renderRow);
  },
  render: function () {
    return React.createElement('table', {children: [
      this.renderHead(),
      this.renderRows()
    ]});
  }
});


},{"./table-head":5,"./table-row":7,"react":2}]},{},[1])(1)
});